{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "id-badge",
  "type": "registry:ui",
  "title": "ID Badge",
  "description": "A propaganda-style identity badge with avatar, name, role, and active star indicator.",
  "files": [
    {
      "path": "src/components/ui/id-badge.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\ninterface IdBadgeProps {\n  src?: string\n  alt?: string\n  fallback?: string\n  name: string\n  role?: string\n  active?: boolean\n  variant?: \"default\" | \"compact\"\n  className?: string\n}\n\n// Star icon for active indicator\nfunction BadgeStar({ className }: { className?: string }) {\n  return (\n    <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className={className}>\n      <polygon points=\"12,2 15,9 22,9 17,14 19,22 12,17 5,22 7,14 2,9 9,9\" />\n    </svg>\n  )\n}\n\n// Avatar component used inside the badge\nfunction BadgeAvatar({\n  src,\n  alt,\n  fallback,\n  compact = false,\n}: {\n  src?: string\n  alt?: string\n  fallback?: string\n  compact?: boolean\n}) {\n  const [imageError, setImageError] = React.useState(false)\n\n  const initials = React.useMemo(() => {\n    if (fallback) return fallback.slice(0, 2).toUpperCase()\n    if (alt) {\n      const words = alt.split(\" \")\n      if (words.length >= 2) {\n        return (words[0][0] + words[1][0]).toUpperCase()\n      }\n      return alt.slice(0, 2).toUpperCase()\n    }\n    return \"??\"\n  }, [fallback, alt])\n\n  const showFallback = !src || imageError\n\n  return (\n    <div\n      className={cn(\n        \"relative flex-shrink-0\",\n        \"flex items-center justify-center\",\n        \"border-3 border-border\",\n        \"rounded-base\",\n        \"bg-background\",\n        \"overflow-hidden\",\n        compact ? \"w-8 h-8\" : \"w-12 h-12\",\n      )}\n    >\n      {showFallback ? (\n        <span\n          className={cn(\n            \"font-heading uppercase tracking-wider\",\n            \"text-foreground\",\n            \"select-none\",\n            compact ? \"text-[10px]\" : \"text-sm\",\n          )}\n        >\n          {initials}\n        </span>\n      ) : (\n        <img\n          src={src}\n          alt={alt || \"\"}\n          onError={() => setImageError(true)}\n          className=\"w-full h-full object-cover\"\n        />\n      )}\n    </div>\n  )\n}\n\nfunction IdBadge({\n  src,\n  alt,\n  fallback,\n  name,\n  role = \"COMRADE\",\n  active = false,\n  variant = \"default\",\n  className,\n}: IdBadgeProps) {\n  const isCompact = variant === \"compact\"\n\n  return (\n    <div\n      className={cn(\n        \"relative inline-flex items-center\",\n        \"border-3 border-border\",\n        \"rounded-base\",\n        \"bg-background\",\n        \"shadow-shadow\",\n        \"overflow-hidden\",\n        isCompact ? \"gap-2 p-1.5 pr-3\" : \"gap-3 p-2 pr-4\",\n        className,\n      )}\n    >\n      {/* Red left edge accent */}\n      <div\n        className={cn(\n          \"absolute left-0 top-0 bottom-0\",\n          \"bg-main\",\n          isCompact ? \"w-1\" : \"w-1.5\",\n        )}\n      />\n\n      {/* Active status: diagonal red stripe with white star */}\n      {active && (\n        <div className=\"absolute top-0 right-0 w-8 h-8 overflow-hidden pointer-events-none z-10\">\n          <div\n            className=\"absolute top-0 right-0 w-12 h-12 bg-main flex items-end justify-start\"\n            style={{\n              transform: \"translate(50%, -50%) rotate(45deg)\",\n            }}\n          >\n            <BadgeStar className=\"w-3 h-3 text-background translate-x-[14px] translate-y-[-2px]\" />\n          </div>\n        </div>\n      )}\n\n      {/* Avatar */}\n      <div className={isCompact ? \"ml-1\" : \"ml-1.5\"}>\n        <BadgeAvatar src={src} alt={alt || name} fallback={fallback} compact={isCompact} />\n      </div>\n\n      {/* Text content */}\n      <div className=\"flex flex-col justify-center min-w-0\">\n        {!isCompact && (\n          <span\n            className={cn(\n              \"text-[9px] font-heading uppercase tracking-[0.15em]\",\n              \"text-main\",\n              \"leading-tight\",\n            )}\n          >\n            {role}\n          </span>\n        )}\n        <span\n          className={cn(\n            \"font-heading uppercase tracking-wide\",\n            \"text-foreground\",\n            \"leading-tight truncate\",\n            isCompact ? \"text-xs\" : \"text-sm\",\n          )}\n        >\n          {name}\n        </span>\n      </div>\n    </div>\n  )\n}\n\nexport { IdBadge, BadgeAvatar, BadgeStar }\nexport type { IdBadgeProps }\n",
      "type": "registry:component",
      "target": "components/ui/id-badge.tsx"
    }
  ]
}